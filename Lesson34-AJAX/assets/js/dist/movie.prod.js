"use strict";var API_KEY="c500ea51";function searchMovie(t){var n,r,a,c,o=arguments;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<o.length&&void 0!==o[1]?o[1]:"",r=2<o.length&&void 0!==o[2]?o[2]:"",e.next=4,regeneratorRuntime.awrap(fetch("https://www.omdbapi.com/?apikey=".concat(API_KEY,"&s=").concat(t,"&type=").concat(n,"&y=").concat(r)));case 4:return a=e.sent,e.next=7,regeneratorRuntime.awrap(a.json());case 7:if("False"===(c=e.sent).Response)return toast.error(c.Error),e.abrupt("return");e.next=11;break;case 11:showMoviesList(c.Search);case 12:case"end":return e.stop()}})}function showMoviesList(e){var t="";e.forEach(function(e){t+='\n            <div class="card mb-3">\n                <img src="'.concat(e.Poster,'" class="card-img-top" alt="').concat(e.Title,'" onerror="this.src=\'assets/movie/assets/images/no-img_720.png\'">\n                <div class="card-body">\n                    <h5 class="card-title">').concat(e.Title,'</h5>\n                    <p class="card-text"><b>Year: </b>').concat(e.Year,'</p>\n                    <button class="btn btn-primary detailed-btn" data-id="').concat(e.imdbID,'">Detailed</button>\n                </div>\n            </div>\n        ')}),document.getElementById("movies-list").innerHTML=t,document.querySelectorAll(".detailed-btn").forEach(function(e){e.addEventListener("click",function(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.getAttribute("data-id"),e.next=3,regeneratorRuntime.awrap(showMovieDetails(n));case 3:case"end":return e.stop()}})})})}function showMovieDetails(t){var n,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://www.omdbapi.com/?apikey=".concat(API_KEY,"&i=").concat(t)));case 2:return n=e.sent,e.next=5,regeneratorRuntime.awrap(n.json());case 5:r=e.sent,document.getElementById("modal-body").innerHTML='\n        <div class="text-center">\n            <img src="'.concat(r.Poster,'" alt="').concat(r.Title,'" class="img-fluid mb-3" style="max-height: 300px;" onerror="this.src=\'assets/movie/assets/images/no-img_720.png\'">\n        </div>\n        <h5>').concat(r.Title," (").concat(r.Year,")</h5>\n        <p><b>Genre:</b> ").concat(r.Genre,"</p>\n        <p><b>Director:</b> ").concat(r.Director,"</p>\n        <p><b>Plot:</b> ").concat(r.Plot,"</p>\n        <p><b>IMDb Rating:</b> ").concat(r.imdbRating,"</p>\n    "),new bootstrap.Modal(document.getElementById("movieModal")).show();case 10:case"end":return e.stop()}})}var form=document.getElementById("search-form");form.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("search-inp").value.trim(),n=document.getElementById("type").value,r=document.getElementById("year").value;if(""===t)return toast.info("Enter movie name for search");searchMovie(t,n,r)}),document.getElementById("year").setAttribute("max",(new Date).getFullYear());