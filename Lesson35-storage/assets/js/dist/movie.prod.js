"use strict";var API_KEY="c500ea51";function searchMovie(t){var n,a,r,o,c=arguments;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<c.length&&void 0!==c[1]?c[1]:"",a=2<c.length&&void 0!==c[2]?c[2]:"",e.next=4,regeneratorRuntime.awrap(fetch("https://www.omdbapi.com/?apikey=".concat(API_KEY,"&s=").concat(t,"&type=").concat(n,"&y=").concat(a)));case 4:return r=e.sent,e.next=7,regeneratorRuntime.awrap(r.json());case 7:if("False"===(o=e.sent).Response)return toast.error(o.Error),e.abrupt("return");e.next=11;break;case 11:showMoviesList(o.Search);case 12:case"end":return e.stop()}})}function showMoviesList(e){var t="";e.forEach(function(e){t+='\n            <div class="card mb-3">\n                <img src="'.concat(e.Poster,'" class="card-img-top" alt="').concat(e.Title,'" onerror="this.src=\'assets/movie/assets/images/no-img_720.png\'">\n                <div class="card-body">\n                    <h5 class="card-title">').concat(e.Title,'</h5>\n                    <p class="card-text"><b>Year: </b>').concat(e.Year,'</p>\n                    <button class="btn btn-primary detailed-btn" data-id="').concat(e.imdbID,'">Detailed</button>\n                    <button class="btn btn-warning favorite-btn" data-id="').concat(e.imdbID,'">â˜…</button>\n                </div>\n            </div>\n        ')}),document.getElementById("movies-list").innerHTML=t,document.querySelectorAll(".detailed-btn").forEach(function(e){e.addEventListener("click",function(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.getAttribute("data-id"),e.next=3,regeneratorRuntime.awrap(showMovieDetails(n));case 3:case"end":return e.stop()}})})}),document.querySelectorAll(".favorite-btn").forEach(function(e){var t=e.getAttribute("data-id");isFavorite(t)&&e.classList.add("active"),e.addEventListener("click",function(){toggleFavorite(t),e.classList.toggle("active")})})}function showMovieDetails(t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://www.omdbapi.com/?apikey=".concat(API_KEY,"&i=").concat(t)));case 2:return n=e.sent,e.next=5,regeneratorRuntime.awrap(n.json());case 5:a=e.sent,document.getElementById("modal-body").innerHTML='\n        <div class="text-center">\n            <img src="'.concat(a.Poster,'" alt="').concat(a.Title,'" class="img-fluid mb-3" style="max-height: 300px;" onerror="this.src=\'assets/movie/assets/images/no-img_720.png\'">\n        </div>\n        <h5>').concat(a.Title," (").concat(a.Year,")</h5>\n        <p><b>Genre:</b> ").concat(a.Genre,"</p>\n        <p><b>Director:</b> ").concat(a.Director,"</p>\n        <p><b>Plot:</b> ").concat(a.Plot,"</p>\n        <p><b>IMDb Rating:</b> ").concat(a.imdbRating,"</p>\n    "),new bootstrap.Modal(document.getElementById("movieModal")).show();case 10:case"end":return e.stop()}})}var form=document.getElementById("search-form");function isFavorite(e){return(JSON.parse(localStorage.getItem("favorites"))||[]).includes(e)}function toggleFavorite(t){var e=JSON.parse(localStorage.getItem("favorites"))||[];e.includes(t)?e=e.filter(function(e){return e!==t}):e.push(t),localStorage.setItem("favorites",JSON.stringify(e))}form.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("search-inp").value.trim(),n=document.getElementById("type").value,a=document.getElementById("year").value;if(""===t)return toast.info("Enter movie name for search");searchMovie(t,n,a)}),document.getElementById("year").setAttribute("max",(new Date).getFullYear());